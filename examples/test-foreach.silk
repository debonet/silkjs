<!-- foreach element -->
<defelt scope="_" name="foreach" items="[]">
	var ascope = {};
	var alv = {};

	return function(){
		var jq = $();

		var a=_.items;

		// delete exess
		each(ascope,function(scope,s){
			if (!(s in a)){
				delete ascope[s];
				delete alv[s];
			}
		});

		each(a,function(x,s){
			if (!(s in ascope)){
				ascope[s] = _.clone();
				ascope[s].defvar("_item",_.expr("_.items['" + s + "']"));
				ascope[s].defvar("_index",s);
				alv[s] = new LiveValue("x",_._createInner(ascope[s]));
			}
		});

		// eval and add
		each(a,function(x,s){
			jq = jq.add(alv[s].fxGet());
		});
		return jq;
	};
</defelt>

<a x="['a','b','c']">\
	<foreach items="_.x">
		item {{_._index}} is {{_._item}}\
	</foreach>
</a>

<a x="{'a':11,'b':22,'c':33}">\
	<foreach items="_.x">
		item {{_._index}} is {{_._item}}\
	</foreach>
</a>



