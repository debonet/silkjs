<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="index.js"></script>
</head>
<body>


<b>Hello world</b><br>

<defmacro name="x" a="'default'">
	this is a test {{_.a}}
</defmacro>

<x></x><br>
<x a='2'></x><br>
<x a='3'></x><br>
<x a='4'></x><br>


<!--  include --> 
<script type="defelt" name="include">
	defvar("_shtmlLoaded");
	defvar("_bLoaded", false);

	return function(){
		var _ = scope._;

		if (!_._bLoaded){
			$.ajax({
				url: _.file,
				success: function(sData, sStatus){
					console.log("loaded...");
					_._shtmlLoaded = compile(scope,$("<div>" + sData + "</div>"))();
					_._bLoaded = true;
					Silk.digest();
				}
			});
		}
		return _._bLoaded ? _._shtmlLoaded : _._inner;
	};
</script>


<include file="'sample.silk'">
	loading...
</include>

</body>
</html>
